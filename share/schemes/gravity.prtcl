
scheme gravity {
  groups fluid {
    select type fluid;

    varying field a = real[] acceleration;
  }

  global {
    field g = real[] gravity;
  }

  procedure initialize_acceleration {
    foreach fluid particle f {
      compute a.f = g;
    }
  }

  procedure accumulate_acceleration {
    foreach fluid particle f {
      compute a.f += g;
    }
  }
}

