
scheme gravity {
  groups dynamic {
    select tag dynamic;

    varying field a = real[] acceleration;
  }

  global {
    field g = real[] gravity;
  }

  procedure initialize_acceleration {
    foreach dynamic particle f {
      compute a.f = g;
    }
  }

  procedure accumulate_acceleration {
    foreach dynamic particle f {
      compute a.f += g;
    }
  }
}

